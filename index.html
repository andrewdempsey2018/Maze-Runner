<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

	<!-- Title that will appear in browser tab -->
    <title>Maze Runner</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

	<!-- Use CDN version of D3 -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
	
	<!-- import style sheet here -->
	<link rel="stylesheet" type="text/css" href="css/styles.css">

</head>
<body>

<!-- This container houses the playarea div that displays the game content -->
	<div class="container">
		<div class="row" id="playArea">
		</div>
	</div>

	<script>

	/* Multi dimensional array to hold level information
	perhaps a later build will assign this to a csv file */
	var level1 = [[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
		[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
		[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
		[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1],
		[1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1],
		[1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,1],
		[1,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1],
		[1,0,1,0,1,0,1,1,1,1,1,1,1,1,0,1,0,1,0,1],
		[1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1],
		[1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1],
		[1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
		[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
		[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
		[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]];
				 
    /* create a canvas for d3 to render onto
	attach it to the body dom element and give
	it a width and height that suit both mobile
	and desktop enviornments */
    var scene = d3.select("#playArea").append("svg")
        .attr("width", 640)
        .attr("height", 480)
		/* COMMENT ON VIEWBOX */
		.attr("viewBox", `0 0 640 480`)
		.on("click", move);

	/* These variables will hold the x and y postitions
	of the player character. They are set to an initial value
	of 0, 32. This means the player will start in the top left
	of the screen */
	var heroX = 0;
	var heroY = 32;	

	/* */
	const HERO_WIDTH = 32;
	const HERO_HEIGHT = 32;

	const TILE_WIDTH = 32;
	const TILE_HEIGHT = 32;
	
	const TILES_ACROSS = 20;
	const TILES_DOWN = 15;

	/* */
	class Tile
	{
		constructor(x, y)
		{
			this.sprite =  scene.append("rect")
				.attr("x", x)
                .attr("y", y)
                .attr("width", TILE_WIDTH)
		        .attr("height", TILE_HEIGHT)
				.attr('fill', '#666666');
		}
	}

	var tileCounter = 0;
	var tiles = [];

	for(var i = 0; i < TILES_ACROSS; i++)
	{
		for(var j = 0; j < TILES_DOWN; j++)
		{
			if(level1[j][i] == 1)
			{
			    //document.write(level1[j][i]);
				tiles[tileCounter] = new Tile(i * TILE_HEIGHT, j * TILE_WIDTH);
			}
		}

		tileCounter++;
	}
	
	var hero = scene.append("rect")
		.attr("id", "hero")
        .attr("x", heroX)
        .attr("y", heroY)
        .attr("width", 32)
		.attr("height", 32)
		.attr('fill', '#17c200')

	function move()
	{
		/* */
		var mouse = d3.mouse(this);

		heroX = mouse[0];

		hero.attr("x", heroX);
		hero.attr("y", heroY);
		
		d3.select("#hero")
            .transition()
            .duration(2000)
            .attr("x", heroX);

		draw();
	};

	function draw()
	{
		window.requestAnimationFrame();
	};

	</script>

</body>
</html>